<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è™›æ“¬å¯µç‰©å¤§å»³</title>
    <link rel="stylesheet" href="./css/style.css"> 
    <style>
        /* -------------------- åŸºç¤ä½ˆå±€ -------------------- */
        body {
            overflow: hidden; /* é˜²æ­¢æ»¾å‹•æ¢å‡ºç¾ */
        }

        header {
            background-color: #333;
            color: white;
            padding: 10px 20px;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 4px solid var(--pixel-black);
            position: relative; /* ç¢ºä¿ header åœ¨æœ€ä¸Šå±¤ */
            z-index: 100;
        }

        .main-layout {
            position: relative; /* å®¹å™¨ç‚ºç›¸å°å®šä½ï¼Œç”¨æ–¼å®¹ç´çµ•å°å®šä½çš„å­å…ƒç´  */
            height: calc(100vh - 56px); /* æ‰£é™¤ header é«˜åº¦ */
        }

        /* éŠæˆ²å¤§å»³å€åŸŸ - å……æ»¿æ•´å€‹ç•«é¢ */
        #lobby-area {
            width: 100%;
            height: 100%;
            position: relative; 
            background-image: url('./assets/lobby-background.png'); /* ä½¿ç”¨ä½ æº–å‚™çš„èƒŒæ™¯åœ–è·¯å¾‘ */
            background-size: cover; /* è®“åœ–ç‰‡è¦†è“‹æ•´å€‹å€åŸŸ */
            background-repeat: no-repeat;
            background-position: center;
            border: none;
            box-shadow: none;
            padding: 0;
        }

        /* å¯µç‰©åœ¨å¤§å»³å…§çš„å®¹å™¨ï¼Œè®“å¯µç‰©å¯ä»¥çµ•å°å®šä½ */
        #lobby-container {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        /* -------------------- æ¼‚æµ® UI å…ƒç´  -------------------- */

        /* è™›æ“¬å¤§å»³æ¨™é¡Œå­—å¡æ•ˆæœ */
        #lobby-title {
            /* ä½¿ç”¨æˆ‘å€‘åœ¨ style.css ä¸­å®šç¾©çš„åƒç´ é‚Šæ¡†æ¨£å¼ */
            border: var(--border-width) solid var(--pixel-black);
            background-color: white; /* ç™½è‰²åº•å¡ */
            padding: 5px 10px;
            
            /* è¤‡è£½åƒç´ é™°å½±æ•ˆæœ */
            box-shadow: var(--border-width) var(--border-width) 0px 0px var(--pixel-black);
            
            /* ä¿æŒå®ƒæ¼‚æµ®åœ¨å·¦ä¸Šè§’ */
            position: absolute; 
            top: 10px; 
            left: 10px; 
            z-index: 20;
            
            font-size: 16px; /* ç¨å¾®æ”¾å¤§æ¨™é¡Œå­—é«” */
        }

        /* æ’è¡Œæ¦œï¼šæ¼‚æµ®åœ¨å³ä¸Šè§’ */
        #leaderboard-box {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 250px;
            padding: 10px;
            z-index: 50; /* è®“å®ƒåœ¨å¯µç‰©ä¸Šæ–¹ */
            /* åƒç´ é‚Šæ¡†æ¨£å¼ç¹¼æ‰¿è‡ª style.css */
            background-color: rgba(255, 255, 255, 0.85); /* é—œéµï¼šåŠé€æ˜èƒŒæ™¯ */
            backdrop-filter: blur(2px); /* è¼•å¾®æ¨¡ç³Šæ•ˆæœ (å¯é¸) */
            font-size: 12px;
        }
        #leaderboard-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        #leaderboard-list li {
            padding: 3px 0;
            border-bottom: 1px dotted #ccc;
        }

        /* å³æ™‚é€šè¨Šå€ï¼šä¸€é–‹å§‹éš±è—ï¼Œé»æ“Šå…¶ä»–ç©å®¶æ™‚å½ˆå‡º */
        #chat-box {
            position: absolute;
            bottom: 20px;
            left: 20px; /* é è¨­ä½ç½®åœ¨å·¦ä¸‹è§’ï¼Œå¯èª¿æ•´ */
            width: 300px;
            height: 200px;
            z-index: 60;
            display: none; /* é—œéµï¼šé è¨­éš±è— */
            flex-direction: column;
            background-color: white;
        }
        #chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 5px;
            margin-bottom: 5px;
            font-size: 12px;
        }
        .chat-input-group {
            display: flex;
            gap: 5px;
        }
        #chat-input {
            flex-grow: 1;
        }


        /* -------------------- å¯µç‰©åœ–ç¤ºåœ¨å¤§å»³ä¸­çš„æ¨£å¼ -------------------- */
        .pet-avatar {
            position: absolute; /* é—œéµï¼šè‡ªç”±å®šä½ */
            width: 96px; 
            height: 110px; /* çµ¦å¯µç‰©åœ–æ¨™ä¸€é»é«˜åº¦ */
            text-align: center;
            cursor: pointer; /* é»æ“Šå¯µç‰©æ‰æœƒå½ˆå‡ºèŠå¤©æ¡† */
        }
        .pet-avatar img {
            width: 100%;
            height: auto;
            image-rendering: pixelated;
            background-color: transparent;
        }
        /* === ä¿®æ­£ 3ï¼šè‡ªå·±çš„å¯µç‰©æ¨™ç±¤æ¨£å¼ (çªå‡ºä¸”æ¸…æ™°) === */
        .pet-avatar#my-pet .pet-name-tag {
            /* ä½¿ç”¨äº®è‰²åº•å’Œé»‘å­— */
            background-color: white; 
            color: var(--pixel-black); /* é»‘è‰²æ–‡å­— */
            font-weight: bold;
            padding: 3px 6px;
            
            /* å¢åŠ åƒç´ é‚Šæ¡†ï¼Œèˆ‡å¯µç‰©èº«é«”åˆ†é›¢ */
            border: 2px solid var(--pixel-black); 
        }

        /* ç¢ºä¿æ‰€æœ‰å¯µç‰©åç¨±æ¨™ç±¤çš„åŸºç¤æ¨£å¼æ˜¯çµ±ä¸€çš„æ¡†é«” */
        .pet-name-tag {
            /* ç‚ºäº†ç¶­æŒå…¶ä»–ç©å®¶æ¨™ç±¤çš„é»‘è‰²èƒŒæ™¯å’Œç™½è‰²å­—é«”ï¼Œæˆ‘å€‘ä¿æŒåŸä¾†çš„æ¨£å­ */
            /* é€™è£¡ä¸å†éœ€è¦ä¿®æ”¹ï¼Œä¿æŒé»‘è‰²åº•ã€ç™½è‰²å­— */
            background-color: var(--pixel-black);
            color: white;
            padding: 2px 5px;
            font-size: 10px;
            margin-top: 5px;
            display: block;
        }
    </style>
</head>
<body>
    <header id="status-bar">
        <div class="my-pet-status">
            <span id="server-id">ä¼ºæœå™¨ï¼šA</span> |
            <span id="pet-name">å¯µç‰©åç¨±ï¼š</span> 
            <span id="pet-level">ç²¾ç¥ç‹€æ…‹ï¼š1</span>
        </div>
        <div class="my-score">
            <span id="player-score">ç©åˆ†ï¼š0 Pts</span>
            <button id="logout-btn">ç™»å‡º</button>
        </div>
    </header>

    <main class="main-layout">
        
        <section id="lobby-area">
            <h2 id="lobby-title" >ğŸŒ è™›æ“¬å¤§å»³ (Server A)</h2>
            
            <div id="lobby-container">
                <div id="my-pet" class="pet-avatar" style="left: 45%; bottom: 10%;">
                    <img id="my-pet-img" src="./assets/pet-active.png" alt="æˆ‘çš„å¯µç‰©" class="pixel-img">
                    <span class="pet-name-tag">è‡ªå·±</span>
                </div>
                <div id="other-pet-1" class="pet-avatar" data-user-id="1" style="left: 70%; top: 30%;">
                    <img src="./assets/pet-active.png" alt="å…¶ä»–å¯µç‰©" class="pixel-img">
                    <span class="pet-name-tag">ç©å®¶ç”²</span>
                </div>
            </div>
        </section>
        
        <div id="leaderboard-box" class="pixel-border-box">
            <h3>ğŸ† æ’è¡Œæ¦œ</h3>
            <ol id="leaderboard-list">
                <li>1. ç©å®¶åç¨± (1000 Pts)</li>
                <li>2. ç©å®¶åç¨± (800 Pts)</li>
            </ol>
        </div>

        <div id="chat-box" class="pixel-border-box">
            <h3 id="chat-header">ğŸ’¬ èˆ‡ [ç©å®¶åç¨±] é€šè¨Šä¸­ <button id="close-chat-btn" style="float: right;">X</button></h3>
            <div id="chat-messages">
                </div>
            <div class="chat-input-group">
                <input type="text" id="chat-input" placeholder="è¼¸å…¥è¨Šæ¯...">
                <button id="chat-send-btn">ç™¼é€</button>
            </div>
        </div>

    </main>

    <script type="module" src="./js/api_client.js"></script>
    <script type="module" src="./js/lobby_app.js"></script>
</body>
</html>